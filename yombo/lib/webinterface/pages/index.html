{% extends "lib/webinterface/fragments/layout.tpl" %}
{% block head_css %}{% include 'lib/webinterface/fragments/echarts_js.tpl' %}{% endblock %}

{% block content %}
            <div class="row">
                <div cass="col-lg-12 col-md-12">
                    <h1 class="page-header">{{ _('Dashboard') }}</h1>
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
            <div class="row">
                <div class="col-lg-3 col-md-3">
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            <div class="row" onclick="location.href='/devices/index';">
                                <div class="col-xs-3">
                                    <i class="fa fa-wifi fa-3x"></i>
                                </div>
                                <div class="col-xs-9 text-right">
                                    <div class="large">{{ devices|length }}</div>
                                    <div class="medium">{{ _('Devices') }}<br>&nbsp;</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-3">
                    <div class="panel panel-warning">
                        <div class="panel-heading">
                            <div class="row" onclick="location.href='/automation/index';">
                                <div class="col-xs-3">
                                    <i class="fa fa-random fa-3x"></i>
                                </div>
                                <div class="col-xs-9 text-right">
                                    <div class="large">{{ automation_rules }}</div>
                                    <div class="medium">{{ _('Automation<br>Rules') }}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-3">
                    <div class="panel panel-warning">
                        <div class="panel-heading">
                            <div class="row" onclick="location.href='/devices/delayed_commands';">
                                <div class="col-xs-3">
                                    <i class="fa fa-cogs fa-3x"></i>
                                </div>
                                <div class="col-xs-9 text-right">
                                    <div class="large">{{ delay_commands|length }}</div>
                                    <div class="medium">{{ _('Delayed<br>Commands') }}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-3">
                    <div class="panel panel-warning">
                        <div class="panel-heading">
                            <div class="row" onclick="location.href='/states/index';">
                                <div class="col-xs-3">
                                    <i class="fa fa-list fa-3x"></i>
                                </div>
                                <div class="col-xs-9 text-right">
                                    <div class="large">{{ states|length }}</div>
                                    <div class="medium">{{ _('States') }}<br>&nbsp;</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /.row -->
            <div class="row">
                <div class="col-lg-6 col-md-6">
    <div id="main" style="width: 100%;height:400px;"></div>

                </div>
                <div class="col-lg-6 col-md-6">

                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
{% endblock %}
{% block body_bottom %}
<script type="text/javascript">
$(document).ready(function(){
    var myChart = echarts.init(document.getElementById('main'));
    myChart.showLoading({
        text: 'Loading',
    });

    //ajax get data...
    var url="/api/v1/statistics/echarts/buckets?name=lib.devices.commands_sent&bucket_size=900&last=1209600";
    $.ajax({
        type:"post",
        url:url,
        dataType: "json",
        success:function(data){
            myChart.hideLoading();

            var option=data;
            myChart.setOption(option);
        },
        error:function(error){
            alert("Errorï¼š"+error);
        }
    });
});
</script>
{% endblock %}
